"use strict";
/**
 * @fileoverview
 * @enhanceable
 * @suppress {messageConventions} JS Compiler reports an error if a variable or
 *     field starts with 'MSG_' and isn't a translatable message.
 * @public
 */
// GENERATED CODE -- DO NOT EDIT!
var jspb = require('google-protobuf');
var goog = jspb;
var global = Function('return this')();
var system_guid_pb = require('../../system/guid_pb.js');
goog.object.extend(proto, system_guid_pb);
var Events_Relativity_interaction_versioned_event_source_pb = require('../../Events.Relativity/interaction/versioned_event_source_pb.js');
goog.object.extend(proto, Events_Relativity_interaction_versioned_event_source_pb);
var Events_Relativity_interaction_event_envelope_pb = require('../../Events.Relativity/interaction/event_envelope_pb.js');
goog.object.extend(proto, Events_Relativity_interaction_event_envelope_pb);
goog.exportSymbol('proto.dolittle.events.relativity.CommittedEventStream', null, global);
/**
 * Generated by JsPbCodeGenerator.
 * @param {Array=} opt_data Optional initial data array, typically from a
 * server response, or constructed directly in Javascript. The array is used
 * in place and becomes part of the constructed object. It is not cloned.
 * If no data is provided, the constructed object will be empty, but still
 * valid.
 * @extends {jspb.Message}
 * @constructor
 */
proto.dolittle.events.relativity.CommittedEventStream = function (opt_data) {
    jspb.Message.initialize(this, opt_data, 0, -1, proto.dolittle.events.relativity.CommittedEventStream.repeatedFields_, null);
};
goog.inherits(proto.dolittle.events.relativity.CommittedEventStream, jspb.Message);
if (goog.DEBUG && !COMPILED) {
    /**
     * @public
     * @override
     */
    proto.dolittle.events.relativity.CommittedEventStream.displayName = 'proto.dolittle.events.relativity.CommittedEventStream';
}
/**
 * List of repeated fields within this message type.
 * @private {!Array<number>}
 * @const
 */
proto.dolittle.events.relativity.CommittedEventStream.repeatedFields_ = [6];
if (jspb.Message.GENERATE_TO_OBJECT) {
    /**
     * Creates an object representation of this proto suitable for use in Soy templates.
     * Field names that are reserved in JavaScript and will be renamed to pb_name.
     * To access a reserved field use, foo.pb_<name>, eg, foo.pb_default.
     * For the list of reserved names please see:
     *     com.google.apps.jspb.JsClassTemplate.JS_RESERVED_WORDS.
     * @param {boolean=} opt_includeInstance Whether to include the JSPB instance
     *     for transitional soy proto support: http://goto/soy-param-migration
     * @return {!Object}
     */
    proto.dolittle.events.relativity.CommittedEventStream.prototype.toObject = function (opt_includeInstance) {
        return proto.dolittle.events.relativity.CommittedEventStream.toObject(opt_includeInstance, this);
    };
    /**
     * Static version of the {@see toObject} method.
     * @param {boolean|undefined} includeInstance Whether to include the JSPB
     *     instance for transitional soy proto support:
     *     http://goto/soy-param-migration
     * @param {!proto.dolittle.events.relativity.CommittedEventStream} msg The msg instance to transform.
     * @return {!Object}
     * @suppress {unusedLocalVariables} f is only used for nested messages
     */
    proto.dolittle.events.relativity.CommittedEventStream.toObject = function (includeInstance, msg) {
        var f, obj = {
            source: (f = msg.getSource()) && Events_Relativity_interaction_versioned_event_source_pb.VersionedEventSource.toObject(includeInstance, f),
            sequence: jspb.Message.getFieldWithDefault(msg, 2, 0),
            id: (f = msg.getId()) && system_guid_pb.guid.toObject(includeInstance, f),
            timestamp: jspb.Message.getFieldWithDefault(msg, 4, 0),
            correlationid: (f = msg.getCorrelationid()) && system_guid_pb.guid.toObject(includeInstance, f),
            eventsList: jspb.Message.toObjectList(msg.getEventsList(), Events_Relativity_interaction_event_envelope_pb.EventEnvelope.toObject, includeInstance)
        };
        if (includeInstance) {
            obj.$jspbMessageInstance = msg;
        }
        return obj;
    };
}
/**
 * Deserializes binary data (in protobuf wire format).
 * @param {jspb.ByteSource} bytes The bytes to deserialize.
 * @return {!proto.dolittle.events.relativity.CommittedEventStream}
 */
proto.dolittle.events.relativity.CommittedEventStream.deserializeBinary = function (bytes) {
    var reader = new jspb.BinaryReader(bytes);
    var msg = new proto.dolittle.events.relativity.CommittedEventStream;
    return proto.dolittle.events.relativity.CommittedEventStream.deserializeBinaryFromReader(msg, reader);
};
/**
 * Deserializes binary data (in protobuf wire format) from the
 * given reader into the given message object.
 * @param {!proto.dolittle.events.relativity.CommittedEventStream} msg The message object to deserialize into.
 * @param {!jspb.BinaryReader} reader The BinaryReader to use.
 * @return {!proto.dolittle.events.relativity.CommittedEventStream}
 */
proto.dolittle.events.relativity.CommittedEventStream.deserializeBinaryFromReader = function (msg, reader) {
    while (reader.nextField()) {
        if (reader.isEndGroup()) {
            break;
        }
        var field = reader.getFieldNumber();
        switch (field) {
            case 1:
                var value = new Events_Relativity_interaction_versioned_event_source_pb.VersionedEventSource;
                reader.readMessage(value, Events_Relativity_interaction_versioned_event_source_pb.VersionedEventSource.deserializeBinaryFromReader);
                msg.setSource(value);
                break;
            case 2:
                var value = /** @type {number} */ (reader.readUint64());
                msg.setSequence(value);
                break;
            case 3:
                var value = new system_guid_pb.guid;
                reader.readMessage(value, system_guid_pb.guid.deserializeBinaryFromReader);
                msg.setId(value);
                break;
            case 4:
                var value = /** @type {number} */ (reader.readInt64());
                msg.setTimestamp(value);
                break;
            case 5:
                var value = new system_guid_pb.guid;
                reader.readMessage(value, system_guid_pb.guid.deserializeBinaryFromReader);
                msg.setCorrelationid(value);
                break;
            case 6:
                var value = new Events_Relativity_interaction_event_envelope_pb.EventEnvelope;
                reader.readMessage(value, Events_Relativity_interaction_event_envelope_pb.EventEnvelope.deserializeBinaryFromReader);
                msg.addEvents(value);
                break;
            default:
                reader.skipField();
                break;
        }
    }
    return msg;
};
/**
 * Serializes the message to binary data (in protobuf wire format).
 * @return {!Uint8Array}
 */
proto.dolittle.events.relativity.CommittedEventStream.prototype.serializeBinary = function () {
    var writer = new jspb.BinaryWriter();
    proto.dolittle.events.relativity.CommittedEventStream.serializeBinaryToWriter(this, writer);
    return writer.getResultBuffer();
};
/**
 * Serializes the given message to binary data (in protobuf wire
 * format), writing to the given BinaryWriter.
 * @param {!proto.dolittle.events.relativity.CommittedEventStream} message
 * @param {!jspb.BinaryWriter} writer
 * @suppress {unusedLocalVariables} f is only used for nested messages
 */
proto.dolittle.events.relativity.CommittedEventStream.serializeBinaryToWriter = function (message, writer) {
    var f = undefined;
    f = message.getSource();
    if (f != null) {
        writer.writeMessage(1, f, Events_Relativity_interaction_versioned_event_source_pb.VersionedEventSource.serializeBinaryToWriter);
    }
    f = message.getSequence();
    if (f !== 0) {
        writer.writeUint64(2, f);
    }
    f = message.getId();
    if (f != null) {
        writer.writeMessage(3, f, system_guid_pb.guid.serializeBinaryToWriter);
    }
    f = message.getTimestamp();
    if (f !== 0) {
        writer.writeInt64(4, f);
    }
    f = message.getCorrelationid();
    if (f != null) {
        writer.writeMessage(5, f, system_guid_pb.guid.serializeBinaryToWriter);
    }
    f = message.getEventsList();
    if (f.length > 0) {
        writer.writeRepeatedMessage(6, f, Events_Relativity_interaction_event_envelope_pb.EventEnvelope.serializeBinaryToWriter);
    }
};
/**
 * optional VersionedEventSource source = 1;
 * @return {?proto.dolittle.events.relativity.VersionedEventSource}
 */
proto.dolittle.events.relativity.CommittedEventStream.prototype.getSource = function () {
    return /** @type{?proto.dolittle.events.relativity.VersionedEventSource} */ (jspb.Message.getWrapperField(this, Events_Relativity_interaction_versioned_event_source_pb.VersionedEventSource, 1));
};
/** @param {?proto.dolittle.events.relativity.VersionedEventSource|undefined} value */
proto.dolittle.events.relativity.CommittedEventStream.prototype.setSource = function (value) {
    jspb.Message.setWrapperField(this, 1, value);
};
/**
 * Clears the message field making it undefined.
 */
proto.dolittle.events.relativity.CommittedEventStream.prototype.clearSource = function () {
    this.setSource(undefined);
};
/**
 * Returns whether this field is set.
 * @return {boolean}
 */
proto.dolittle.events.relativity.CommittedEventStream.prototype.hasSource = function () {
    return jspb.Message.getField(this, 1) != null;
};
/**
 * optional uint64 sequence = 2;
 * @return {number}
 */
proto.dolittle.events.relativity.CommittedEventStream.prototype.getSequence = function () {
    return /** @type {number} */ (jspb.Message.getFieldWithDefault(this, 2, 0));
};
/** @param {number} value */
proto.dolittle.events.relativity.CommittedEventStream.prototype.setSequence = function (value) {
    jspb.Message.setProto3IntField(this, 2, value);
};
/**
 * optional dolittle.guid id = 3;
 * @return {?proto.dolittle.guid}
 */
proto.dolittle.events.relativity.CommittedEventStream.prototype.getId = function () {
    return /** @type{?proto.dolittle.guid} */ (jspb.Message.getWrapperField(this, system_guid_pb.guid, 3));
};
/** @param {?proto.dolittle.guid|undefined} value */
proto.dolittle.events.relativity.CommittedEventStream.prototype.setId = function (value) {
    jspb.Message.setWrapperField(this, 3, value);
};
/**
 * Clears the message field making it undefined.
 */
proto.dolittle.events.relativity.CommittedEventStream.prototype.clearId = function () {
    this.setId(undefined);
};
/**
 * Returns whether this field is set.
 * @return {boolean}
 */
proto.dolittle.events.relativity.CommittedEventStream.prototype.hasId = function () {
    return jspb.Message.getField(this, 3) != null;
};
/**
 * optional int64 timeStamp = 4;
 * @return {number}
 */
proto.dolittle.events.relativity.CommittedEventStream.prototype.getTimestamp = function () {
    return /** @type {number} */ (jspb.Message.getFieldWithDefault(this, 4, 0));
};
/** @param {number} value */
proto.dolittle.events.relativity.CommittedEventStream.prototype.setTimestamp = function (value) {
    jspb.Message.setProto3IntField(this, 4, value);
};
/**
 * optional dolittle.guid correlationId = 5;
 * @return {?proto.dolittle.guid}
 */
proto.dolittle.events.relativity.CommittedEventStream.prototype.getCorrelationid = function () {
    return /** @type{?proto.dolittle.guid} */ (jspb.Message.getWrapperField(this, system_guid_pb.guid, 5));
};
/** @param {?proto.dolittle.guid|undefined} value */
proto.dolittle.events.relativity.CommittedEventStream.prototype.setCorrelationid = function (value) {
    jspb.Message.setWrapperField(this, 5, value);
};
/**
 * Clears the message field making it undefined.
 */
proto.dolittle.events.relativity.CommittedEventStream.prototype.clearCorrelationid = function () {
    this.setCorrelationid(undefined);
};
/**
 * Returns whether this field is set.
 * @return {boolean}
 */
proto.dolittle.events.relativity.CommittedEventStream.prototype.hasCorrelationid = function () {
    return jspb.Message.getField(this, 5) != null;
};
/**
 * repeated EventEnvelope events = 6;
 * @return {!Array<!proto.dolittle.events.relativity.EventEnvelope>}
 */
proto.dolittle.events.relativity.CommittedEventStream.prototype.getEventsList = function () {
    return /** @type{!Array<!proto.dolittle.events.relativity.EventEnvelope>} */ (jspb.Message.getRepeatedWrapperField(this, Events_Relativity_interaction_event_envelope_pb.EventEnvelope, 6));
};
/** @param {!Array<!proto.dolittle.events.relativity.EventEnvelope>} value */
proto.dolittle.events.relativity.CommittedEventStream.prototype.setEventsList = function (value) {
    jspb.Message.setRepeatedWrapperField(this, 6, value);
};
/**
 * @param {!proto.dolittle.events.relativity.EventEnvelope=} opt_value
 * @param {number=} opt_index
 * @return {!proto.dolittle.events.relativity.EventEnvelope}
 */
proto.dolittle.events.relativity.CommittedEventStream.prototype.addEvents = function (opt_value, opt_index) {
    return jspb.Message.addToRepeatedWrapperField(this, 6, opt_value, proto.dolittle.events.relativity.EventEnvelope, opt_index);
};
/**
 * Clears the list making it empty but non-null.
 */
proto.dolittle.events.relativity.CommittedEventStream.prototype.clearEventsList = function () {
    this.setEventsList([]);
};
goog.object.extend(exports, proto.dolittle.events.relativity);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tbWl0dGVkX2V2ZW50X3N0cmVhbV9wYi5qcyIsInNvdXJjZVJvb3QiOiIuLyIsInNvdXJjZXMiOlsiRXZlbnRzLlJlbGF0aXZpdHkvaW50ZXJhY3Rpb24vY29tbWl0dGVkX2V2ZW50X3N0cmVhbV9wYi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7Ozs7OztHQU1HO0FBQ0gsaUNBQWlDO0FBRWpDLElBQUksSUFBSSxHQUFHLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0FBQ3RDLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQztBQUNoQixJQUFJLE1BQU0sR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLEVBQUUsQ0FBQztBQUV2QyxJQUFJLGNBQWMsR0FBRyxPQUFPLENBQUMseUJBQXlCLENBQUMsQ0FBQztBQUN4RCxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsY0FBYyxDQUFDLENBQUM7QUFDMUMsSUFBSSx1REFBdUQsR0FBRyxPQUFPLENBQUMsa0VBQWtFLENBQUMsQ0FBQztBQUMxSSxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsdURBQXVELENBQUMsQ0FBQztBQUNuRixJQUFJLCtDQUErQyxHQUFHLE9BQU8sQ0FBQywwREFBMEQsQ0FBQyxDQUFDO0FBQzFILElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSwrQ0FBK0MsQ0FBQyxDQUFDO0FBQzNFLElBQUksQ0FBQyxZQUFZLENBQUMsdURBQXVELEVBQUUsSUFBSSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQ3pGOzs7Ozs7Ozs7R0FTRztBQUNILEtBQUssQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxvQkFBb0IsR0FBRyxVQUFTLFFBQVE7SUFDdkUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLFFBQVEsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLG9CQUFvQixDQUFDLGVBQWUsRUFBRSxJQUFJLENBQUMsQ0FBQztBQUM5SCxDQUFDLENBQUM7QUFDRixJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxvQkFBb0IsRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDbkYsSUFBSSxJQUFJLENBQUMsS0FBSyxJQUFJLENBQUMsUUFBUSxFQUFFO0lBQzNCOzs7T0FHRztJQUNILEtBQUssQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxvQkFBb0IsQ0FBQyxXQUFXLEdBQUcsdURBQXVELENBQUM7Q0FDN0g7QUFFRDs7OztHQUlHO0FBQ0gsS0FBSyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLG9CQUFvQixDQUFDLGVBQWUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBSTVFLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxrQkFBa0IsRUFBRTtJQUNyQzs7Ozs7Ozs7O09BU0c7SUFDSCxLQUFLLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsb0JBQW9CLENBQUMsU0FBUyxDQUFDLFFBQVEsR0FBRyxVQUFTLG1CQUFtQjtRQUNyRyxPQUFPLEtBQUssQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxvQkFBb0IsQ0FBQyxRQUFRLENBQUMsbUJBQW1CLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDbkcsQ0FBQyxDQUFDO0lBR0Y7Ozs7Ozs7O09BUUc7SUFDSCxLQUFLLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsb0JBQW9CLENBQUMsUUFBUSxHQUFHLFVBQVMsZUFBZSxFQUFFLEdBQUc7UUFDNUYsSUFBSSxDQUFDLEVBQUUsR0FBRyxHQUFHO1lBQ1gsTUFBTSxFQUFFLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxJQUFJLHVEQUF1RCxDQUFDLG9CQUFvQixDQUFDLFFBQVEsQ0FBQyxlQUFlLEVBQUUsQ0FBQyxDQUFDO1lBQzFJLFFBQVEsRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLG1CQUFtQixDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ3JELEVBQUUsRUFBRSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsS0FBSyxFQUFFLENBQUMsSUFBSSxjQUFjLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxlQUFlLEVBQUUsQ0FBQyxDQUFDO1lBQ3pFLFNBQVMsRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLG1CQUFtQixDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ3RELGFBQWEsRUFBRSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQyxJQUFJLGNBQWMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLGVBQWUsRUFBRSxDQUFDLENBQUM7WUFDL0YsVUFBVSxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxhQUFhLEVBQUUsRUFDekQsK0NBQStDLENBQUMsYUFBYSxDQUFDLFFBQVEsRUFBRSxlQUFlLENBQUM7U0FDekYsQ0FBQztRQUVGLElBQUksZUFBZSxFQUFFO1lBQ25CLEdBQUcsQ0FBQyxvQkFBb0IsR0FBRyxHQUFHLENBQUM7U0FDaEM7UUFDRCxPQUFPLEdBQUcsQ0FBQztJQUNiLENBQUMsQ0FBQztDQUNEO0FBR0Q7Ozs7R0FJRztBQUNILEtBQUssQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxvQkFBb0IsQ0FBQyxpQkFBaUIsR0FBRyxVQUFTLEtBQUs7SUFDdEYsSUFBSSxNQUFNLEdBQUcsSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzFDLElBQUksR0FBRyxHQUFHLElBQUksS0FBSyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLG9CQUFvQixDQUFDO0lBQ3BFLE9BQU8sS0FBSyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLG9CQUFvQixDQUFDLDJCQUEyQixDQUFDLEdBQUcsRUFBRSxNQUFNLENBQUMsQ0FBQztBQUN4RyxDQUFDLENBQUM7QUFHRjs7Ozs7O0dBTUc7QUFDSCxLQUFLLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsb0JBQW9CLENBQUMsMkJBQTJCLEdBQUcsVUFBUyxHQUFHLEVBQUUsTUFBTTtJQUN0RyxPQUFPLE1BQU0sQ0FBQyxTQUFTLEVBQUUsRUFBRTtRQUN6QixJQUFJLE1BQU0sQ0FBQyxVQUFVLEVBQUUsRUFBRTtZQUN2QixNQUFNO1NBQ1A7UUFDRCxJQUFJLEtBQUssR0FBRyxNQUFNLENBQUMsY0FBYyxFQUFFLENBQUM7UUFDcEMsUUFBUSxLQUFLLEVBQUU7WUFDZixLQUFLLENBQUM7Z0JBQ0osSUFBSSxLQUFLLEdBQUcsSUFBSSx1REFBdUQsQ0FBQyxvQkFBb0IsQ0FBQztnQkFDN0YsTUFBTSxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUMsdURBQXVELENBQUMsb0JBQW9CLENBQUMsMkJBQTJCLENBQUMsQ0FBQztnQkFDbkksR0FBRyxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDckIsTUFBTTtZQUNSLEtBQUssQ0FBQztnQkFDSixJQUFJLEtBQUssR0FBRyxxQkFBcUIsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFDO2dCQUN4RCxHQUFHLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUN2QixNQUFNO1lBQ1IsS0FBSyxDQUFDO2dCQUNKLElBQUksS0FBSyxHQUFHLElBQUksY0FBYyxDQUFDLElBQUksQ0FBQztnQkFDcEMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUMsY0FBYyxDQUFDLElBQUksQ0FBQywyQkFBMkIsQ0FBQyxDQUFDO2dCQUMxRSxHQUFHLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUNqQixNQUFNO1lBQ1IsS0FBSyxDQUFDO2dCQUNKLElBQUksS0FBSyxHQUFHLHFCQUFxQixDQUFDLENBQUMsTUFBTSxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUM7Z0JBQ3ZELEdBQUcsQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQ3hCLE1BQU07WUFDUixLQUFLLENBQUM7Z0JBQ0osSUFBSSxLQUFLLEdBQUcsSUFBSSxjQUFjLENBQUMsSUFBSSxDQUFDO2dCQUNwQyxNQUFNLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBQyxjQUFjLENBQUMsSUFBSSxDQUFDLDJCQUEyQixDQUFDLENBQUM7Z0JBQzFFLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDNUIsTUFBTTtZQUNSLEtBQUssQ0FBQztnQkFDSixJQUFJLEtBQUssR0FBRyxJQUFJLCtDQUErQyxDQUFDLGFBQWEsQ0FBQztnQkFDOUUsTUFBTSxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUMsK0NBQStDLENBQUMsYUFBYSxDQUFDLDJCQUEyQixDQUFDLENBQUM7Z0JBQ3BILEdBQUcsQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQ3JCLE1BQU07WUFDUjtnQkFDRSxNQUFNLENBQUMsU0FBUyxFQUFFLENBQUM7Z0JBQ25CLE1BQU07U0FDUDtLQUNGO0lBQ0QsT0FBTyxHQUFHLENBQUM7QUFDYixDQUFDLENBQUM7QUFHRjs7O0dBR0c7QUFDSCxLQUFLLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsb0JBQW9CLENBQUMsU0FBUyxDQUFDLGVBQWUsR0FBRztJQUNoRixJQUFJLE1BQU0sR0FBRyxJQUFJLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztJQUNyQyxLQUFLLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsb0JBQW9CLENBQUMsdUJBQXVCLENBQUMsSUFBSSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBQzVGLE9BQU8sTUFBTSxDQUFDLGVBQWUsRUFBRSxDQUFDO0FBQ2xDLENBQUMsQ0FBQztBQUdGOzs7Ozs7R0FNRztBQUNILEtBQUssQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxvQkFBb0IsQ0FBQyx1QkFBdUIsR0FBRyxVQUFTLE9BQU8sRUFBRSxNQUFNO0lBQ3RHLElBQUksQ0FBQyxHQUFHLFNBQVMsQ0FBQztJQUNsQixDQUFDLEdBQUcsT0FBTyxDQUFDLFNBQVMsRUFBRSxDQUFDO0lBQ3hCLElBQUksQ0FBQyxJQUFJLElBQUksRUFBRTtRQUNiLE1BQU0sQ0FBQyxZQUFZLENBQ2pCLENBQUMsRUFDRCxDQUFDLEVBQ0QsdURBQXVELENBQUMsb0JBQW9CLENBQUMsdUJBQXVCLENBQ3JHLENBQUM7S0FDSDtJQUNELENBQUMsR0FBRyxPQUFPLENBQUMsV0FBVyxFQUFFLENBQUM7SUFDMUIsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFO1FBQ1gsTUFBTSxDQUFDLFdBQVcsQ0FDaEIsQ0FBQyxFQUNELENBQUMsQ0FDRixDQUFDO0tBQ0g7SUFDRCxDQUFDLEdBQUcsT0FBTyxDQUFDLEtBQUssRUFBRSxDQUFDO0lBQ3BCLElBQUksQ0FBQyxJQUFJLElBQUksRUFBRTtRQUNiLE1BQU0sQ0FBQyxZQUFZLENBQ2pCLENBQUMsRUFDRCxDQUFDLEVBQ0QsY0FBYyxDQUFDLElBQUksQ0FBQyx1QkFBdUIsQ0FDNUMsQ0FBQztLQUNIO0lBQ0QsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxZQUFZLEVBQUUsQ0FBQztJQUMzQixJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUU7UUFDWCxNQUFNLENBQUMsVUFBVSxDQUNmLENBQUMsRUFDRCxDQUFDLENBQ0YsQ0FBQztLQUNIO0lBQ0QsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO0lBQy9CLElBQUksQ0FBQyxJQUFJLElBQUksRUFBRTtRQUNiLE1BQU0sQ0FBQyxZQUFZLENBQ2pCLENBQUMsRUFDRCxDQUFDLEVBQ0QsY0FBYyxDQUFDLElBQUksQ0FBQyx1QkFBdUIsQ0FDNUMsQ0FBQztLQUNIO0lBQ0QsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxhQUFhLEVBQUUsQ0FBQztJQUM1QixJQUFJLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO1FBQ2hCLE1BQU0sQ0FBQyxvQkFBb0IsQ0FDekIsQ0FBQyxFQUNELENBQUMsRUFDRCwrQ0FBK0MsQ0FBQyxhQUFhLENBQUMsdUJBQXVCLENBQ3RGLENBQUM7S0FDSDtBQUNILENBQUMsQ0FBQztBQUdGOzs7R0FHRztBQUNILEtBQUssQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxvQkFBb0IsQ0FBQyxTQUFTLENBQUMsU0FBUyxHQUFHO0lBQzFFLE9BQU8sb0VBQW9FLENBQUMsQ0FDMUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxlQUFlLENBQUMsSUFBSSxFQUFFLHVEQUF1RCxDQUFDLG9CQUFvQixFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDekgsQ0FBQyxDQUFDO0FBR0Ysc0ZBQXNGO0FBQ3RGLEtBQUssQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxvQkFBb0IsQ0FBQyxTQUFTLENBQUMsU0FBUyxHQUFHLFVBQVMsS0FBSztJQUN4RixJQUFJLENBQUMsT0FBTyxDQUFDLGVBQWUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDO0FBQy9DLENBQUMsQ0FBQztBQUdGOztHQUVHO0FBQ0gsS0FBSyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLG9CQUFvQixDQUFDLFNBQVMsQ0FBQyxXQUFXLEdBQUc7SUFDNUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUM1QixDQUFDLENBQUM7QUFHRjs7O0dBR0c7QUFDSCxLQUFLLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsb0JBQW9CLENBQUMsU0FBUyxDQUFDLFNBQVMsR0FBRztJQUMxRSxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUM7QUFDaEQsQ0FBQyxDQUFDO0FBR0Y7OztHQUdHO0FBQ0gsS0FBSyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLG9CQUFvQixDQUFDLFNBQVMsQ0FBQyxXQUFXLEdBQUc7SUFDNUUsT0FBTyxxQkFBcUIsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsbUJBQW1CLENBQUMsSUFBSSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzlFLENBQUMsQ0FBQztBQUdGLDRCQUE0QjtBQUM1QixLQUFLLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsb0JBQW9CLENBQUMsU0FBUyxDQUFDLFdBQVcsR0FBRyxVQUFTLEtBQUs7SUFDMUYsSUFBSSxDQUFDLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDO0FBQ2pELENBQUMsQ0FBQztBQUdGOzs7R0FHRztBQUNILEtBQUssQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxvQkFBb0IsQ0FBQyxTQUFTLENBQUMsS0FBSyxHQUFHO0lBQ3RFLE9BQU8sa0NBQWtDLENBQUMsQ0FDeEMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxlQUFlLENBQUMsSUFBSSxFQUFFLGNBQWMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNoRSxDQUFDLENBQUM7QUFHRixvREFBb0Q7QUFDcEQsS0FBSyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLG9CQUFvQixDQUFDLFNBQVMsQ0FBQyxLQUFLLEdBQUcsVUFBUyxLQUFLO0lBQ3BGLElBQUksQ0FBQyxPQUFPLENBQUMsZUFBZSxDQUFDLElBQUksRUFBRSxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDL0MsQ0FBQyxDQUFDO0FBR0Y7O0dBRUc7QUFDSCxLQUFLLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsb0JBQW9CLENBQUMsU0FBUyxDQUFDLE9BQU8sR0FBRztJQUN4RSxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBQ3hCLENBQUMsQ0FBQztBQUdGOzs7R0FHRztBQUNILEtBQUssQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxvQkFBb0IsQ0FBQyxTQUFTLENBQUMsS0FBSyxHQUFHO0lBQ3RFLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQztBQUNoRCxDQUFDLENBQUM7QUFHRjs7O0dBR0c7QUFDSCxLQUFLLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsb0JBQW9CLENBQUMsU0FBUyxDQUFDLFlBQVksR0FBRztJQUM3RSxPQUFPLHFCQUFxQixDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDOUUsQ0FBQyxDQUFDO0FBR0YsNEJBQTRCO0FBQzVCLEtBQUssQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxvQkFBb0IsQ0FBQyxTQUFTLENBQUMsWUFBWSxHQUFHLFVBQVMsS0FBSztJQUMzRixJQUFJLENBQUMsT0FBTyxDQUFDLGlCQUFpQixDQUFDLElBQUksRUFBRSxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDakQsQ0FBQyxDQUFDO0FBR0Y7OztHQUdHO0FBQ0gsS0FBSyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLG9CQUFvQixDQUFDLFNBQVMsQ0FBQyxnQkFBZ0IsR0FBRztJQUNqRixPQUFPLGtDQUFrQyxDQUFDLENBQ3hDLElBQUksQ0FBQyxPQUFPLENBQUMsZUFBZSxDQUFDLElBQUksRUFBRSxjQUFjLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDaEUsQ0FBQyxDQUFDO0FBR0Ysb0RBQW9EO0FBQ3BELEtBQUssQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxvQkFBb0IsQ0FBQyxTQUFTLENBQUMsZ0JBQWdCLEdBQUcsVUFBUyxLQUFLO0lBQy9GLElBQUksQ0FBQyxPQUFPLENBQUMsZUFBZSxDQUFDLElBQUksRUFBRSxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDL0MsQ0FBQyxDQUFDO0FBR0Y7O0dBRUc7QUFDSCxLQUFLLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsb0JBQW9CLENBQUMsU0FBUyxDQUFDLGtCQUFrQixHQUFHO0lBQ25GLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUNuQyxDQUFDLENBQUM7QUFHRjs7O0dBR0c7QUFDSCxLQUFLLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsb0JBQW9CLENBQUMsU0FBUyxDQUFDLGdCQUFnQixHQUFHO0lBQ2pGLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQztBQUNoRCxDQUFDLENBQUM7QUFHRjs7O0dBR0c7QUFDSCxLQUFLLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsb0JBQW9CLENBQUMsU0FBUyxDQUFDLGFBQWEsR0FBRztJQUM5RSxPQUFPLHFFQUFxRSxDQUFDLENBQzNFLElBQUksQ0FBQyxPQUFPLENBQUMsdUJBQXVCLENBQUMsSUFBSSxFQUFFLCtDQUErQyxDQUFDLGFBQWEsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2xILENBQUMsQ0FBQztBQUdGLDZFQUE2RTtBQUM3RSxLQUFLLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsb0JBQW9CLENBQUMsU0FBUyxDQUFDLGFBQWEsR0FBRyxVQUFTLEtBQUs7SUFDNUYsSUFBSSxDQUFDLE9BQU8sQ0FBQyx1QkFBdUIsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDO0FBQ3ZELENBQUMsQ0FBQztBQUdGOzs7O0dBSUc7QUFDSCxLQUFLLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsb0JBQW9CLENBQUMsU0FBUyxDQUFDLFNBQVMsR0FBRyxVQUFTLFNBQVMsRUFBRSxTQUFTO0lBQ3ZHLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyx5QkFBeUIsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxFQUFFLFNBQVMsRUFBRSxLQUFLLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsYUFBYSxFQUFFLFNBQVMsQ0FBQyxDQUFDO0FBQy9ILENBQUMsQ0FBQztBQUdGOztHQUVHO0FBQ0gsS0FBSyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLG9CQUFvQixDQUFDLFNBQVMsQ0FBQyxlQUFlLEdBQUc7SUFDaEYsSUFBSSxDQUFDLGFBQWEsQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUN6QixDQUFDLENBQUM7QUFHRixJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUUsS0FBSyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlb3ZlcnZpZXdcbiAqIEBlbmhhbmNlYWJsZVxuICogQHN1cHByZXNzIHttZXNzYWdlQ29udmVudGlvbnN9IEpTIENvbXBpbGVyIHJlcG9ydHMgYW4gZXJyb3IgaWYgYSB2YXJpYWJsZSBvclxuICogICAgIGZpZWxkIHN0YXJ0cyB3aXRoICdNU0dfJyBhbmQgaXNuJ3QgYSB0cmFuc2xhdGFibGUgbWVzc2FnZS5cbiAqIEBwdWJsaWNcbiAqL1xuLy8gR0VORVJBVEVEIENPREUgLS0gRE8gTk9UIEVESVQhXG5cbnZhciBqc3BiID0gcmVxdWlyZSgnZ29vZ2xlLXByb3RvYnVmJyk7XG52YXIgZ29vZyA9IGpzcGI7XG52YXIgZ2xvYmFsID0gRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblxudmFyIHN5c3RlbV9ndWlkX3BiID0gcmVxdWlyZSgnLi4vLi4vc3lzdGVtL2d1aWRfcGIuanMnKTtcbmdvb2cub2JqZWN0LmV4dGVuZChwcm90bywgc3lzdGVtX2d1aWRfcGIpO1xudmFyIEV2ZW50c19SZWxhdGl2aXR5X2ludGVyYWN0aW9uX3ZlcnNpb25lZF9ldmVudF9zb3VyY2VfcGIgPSByZXF1aXJlKCcuLi8uLi9FdmVudHMuUmVsYXRpdml0eS9pbnRlcmFjdGlvbi92ZXJzaW9uZWRfZXZlbnRfc291cmNlX3BiLmpzJyk7XG5nb29nLm9iamVjdC5leHRlbmQocHJvdG8sIEV2ZW50c19SZWxhdGl2aXR5X2ludGVyYWN0aW9uX3ZlcnNpb25lZF9ldmVudF9zb3VyY2VfcGIpO1xudmFyIEV2ZW50c19SZWxhdGl2aXR5X2ludGVyYWN0aW9uX2V2ZW50X2VudmVsb3BlX3BiID0gcmVxdWlyZSgnLi4vLi4vRXZlbnRzLlJlbGF0aXZpdHkvaW50ZXJhY3Rpb24vZXZlbnRfZW52ZWxvcGVfcGIuanMnKTtcbmdvb2cub2JqZWN0LmV4dGVuZChwcm90bywgRXZlbnRzX1JlbGF0aXZpdHlfaW50ZXJhY3Rpb25fZXZlbnRfZW52ZWxvcGVfcGIpO1xuZ29vZy5leHBvcnRTeW1ib2woJ3Byb3RvLmRvbGl0dGxlLmV2ZW50cy5yZWxhdGl2aXR5LkNvbW1pdHRlZEV2ZW50U3RyZWFtJywgbnVsbCwgZ2xvYmFsKTtcbi8qKlxuICogR2VuZXJhdGVkIGJ5IEpzUGJDb2RlR2VuZXJhdG9yLlxuICogQHBhcmFtIHtBcnJheT19IG9wdF9kYXRhIE9wdGlvbmFsIGluaXRpYWwgZGF0YSBhcnJheSwgdHlwaWNhbGx5IGZyb20gYVxuICogc2VydmVyIHJlc3BvbnNlLCBvciBjb25zdHJ1Y3RlZCBkaXJlY3RseSBpbiBKYXZhc2NyaXB0LiBUaGUgYXJyYXkgaXMgdXNlZFxuICogaW4gcGxhY2UgYW5kIGJlY29tZXMgcGFydCBvZiB0aGUgY29uc3RydWN0ZWQgb2JqZWN0LiBJdCBpcyBub3QgY2xvbmVkLlxuICogSWYgbm8gZGF0YSBpcyBwcm92aWRlZCwgdGhlIGNvbnN0cnVjdGVkIG9iamVjdCB3aWxsIGJlIGVtcHR5LCBidXQgc3RpbGxcbiAqIHZhbGlkLlxuICogQGV4dGVuZHMge2pzcGIuTWVzc2FnZX1cbiAqIEBjb25zdHJ1Y3RvclxuICovXG5wcm90by5kb2xpdHRsZS5ldmVudHMucmVsYXRpdml0eS5Db21taXR0ZWRFdmVudFN0cmVhbSA9IGZ1bmN0aW9uKG9wdF9kYXRhKSB7XG4gIGpzcGIuTWVzc2FnZS5pbml0aWFsaXplKHRoaXMsIG9wdF9kYXRhLCAwLCAtMSwgcHJvdG8uZG9saXR0bGUuZXZlbnRzLnJlbGF0aXZpdHkuQ29tbWl0dGVkRXZlbnRTdHJlYW0ucmVwZWF0ZWRGaWVsZHNfLCBudWxsKTtcbn07XG5nb29nLmluaGVyaXRzKHByb3RvLmRvbGl0dGxlLmV2ZW50cy5yZWxhdGl2aXR5LkNvbW1pdHRlZEV2ZW50U3RyZWFtLCBqc3BiLk1lc3NhZ2UpO1xuaWYgKGdvb2cuREVCVUcgJiYgIUNPTVBJTEVEKSB7XG4gIC8qKlxuICAgKiBAcHVibGljXG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgcHJvdG8uZG9saXR0bGUuZXZlbnRzLnJlbGF0aXZpdHkuQ29tbWl0dGVkRXZlbnRTdHJlYW0uZGlzcGxheU5hbWUgPSAncHJvdG8uZG9saXR0bGUuZXZlbnRzLnJlbGF0aXZpdHkuQ29tbWl0dGVkRXZlbnRTdHJlYW0nO1xufVxuXG4vKipcbiAqIExpc3Qgb2YgcmVwZWF0ZWQgZmllbGRzIHdpdGhpbiB0aGlzIG1lc3NhZ2UgdHlwZS5cbiAqIEBwcml2YXRlIHshQXJyYXk8bnVtYmVyPn1cbiAqIEBjb25zdFxuICovXG5wcm90by5kb2xpdHRsZS5ldmVudHMucmVsYXRpdml0eS5Db21taXR0ZWRFdmVudFN0cmVhbS5yZXBlYXRlZEZpZWxkc18gPSBbNl07XG5cblxuXG5pZiAoanNwYi5NZXNzYWdlLkdFTkVSQVRFX1RPX09CSkVDVCkge1xuLyoqXG4gKiBDcmVhdGVzIGFuIG9iamVjdCByZXByZXNlbnRhdGlvbiBvZiB0aGlzIHByb3RvIHN1aXRhYmxlIGZvciB1c2UgaW4gU295IHRlbXBsYXRlcy5cbiAqIEZpZWxkIG5hbWVzIHRoYXQgYXJlIHJlc2VydmVkIGluIEphdmFTY3JpcHQgYW5kIHdpbGwgYmUgcmVuYW1lZCB0byBwYl9uYW1lLlxuICogVG8gYWNjZXNzIGEgcmVzZXJ2ZWQgZmllbGQgdXNlLCBmb28ucGJfPG5hbWU+LCBlZywgZm9vLnBiX2RlZmF1bHQuXG4gKiBGb3IgdGhlIGxpc3Qgb2YgcmVzZXJ2ZWQgbmFtZXMgcGxlYXNlIHNlZTpcbiAqICAgICBjb20uZ29vZ2xlLmFwcHMuanNwYi5Kc0NsYXNzVGVtcGxhdGUuSlNfUkVTRVJWRURfV09SRFMuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfaW5jbHVkZUluc3RhbmNlIFdoZXRoZXIgdG8gaW5jbHVkZSB0aGUgSlNQQiBpbnN0YW5jZVxuICogICAgIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6IGh0dHA6Ly9nb3RvL3NveS1wYXJhbS1taWdyYXRpb25cbiAqIEByZXR1cm4geyFPYmplY3R9XG4gKi9cbnByb3RvLmRvbGl0dGxlLmV2ZW50cy5yZWxhdGl2aXR5LkNvbW1pdHRlZEV2ZW50U3RyZWFtLnByb3RvdHlwZS50b09iamVjdCA9IGZ1bmN0aW9uKG9wdF9pbmNsdWRlSW5zdGFuY2UpIHtcbiAgcmV0dXJuIHByb3RvLmRvbGl0dGxlLmV2ZW50cy5yZWxhdGl2aXR5LkNvbW1pdHRlZEV2ZW50U3RyZWFtLnRvT2JqZWN0KG9wdF9pbmNsdWRlSW5zdGFuY2UsIHRoaXMpO1xufTtcblxuXG4vKipcbiAqIFN0YXRpYyB2ZXJzaW9uIG9mIHRoZSB7QHNlZSB0b09iamVjdH0gbWV0aG9kLlxuICogQHBhcmFtIHtib29sZWFufHVuZGVmaW5lZH0gaW5jbHVkZUluc3RhbmNlIFdoZXRoZXIgdG8gaW5jbHVkZSB0aGUgSlNQQlxuICogICAgIGluc3RhbmNlIGZvciB0cmFuc2l0aW9uYWwgc295IHByb3RvIHN1cHBvcnQ6XG4gKiAgICAgaHR0cDovL2dvdG8vc295LXBhcmFtLW1pZ3JhdGlvblxuICogQHBhcmFtIHshcHJvdG8uZG9saXR0bGUuZXZlbnRzLnJlbGF0aXZpdHkuQ29tbWl0dGVkRXZlbnRTdHJlYW19IG1zZyBUaGUgbXNnIGluc3RhbmNlIHRvIHRyYW5zZm9ybS5cbiAqIEByZXR1cm4geyFPYmplY3R9XG4gKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzXG4gKi9cbnByb3RvLmRvbGl0dGxlLmV2ZW50cy5yZWxhdGl2aXR5LkNvbW1pdHRlZEV2ZW50U3RyZWFtLnRvT2JqZWN0ID0gZnVuY3Rpb24oaW5jbHVkZUluc3RhbmNlLCBtc2cpIHtcbiAgdmFyIGYsIG9iaiA9IHtcbiAgICBzb3VyY2U6IChmID0gbXNnLmdldFNvdXJjZSgpKSAmJiBFdmVudHNfUmVsYXRpdml0eV9pbnRlcmFjdGlvbl92ZXJzaW9uZWRfZXZlbnRfc291cmNlX3BiLlZlcnNpb25lZEV2ZW50U291cmNlLnRvT2JqZWN0KGluY2x1ZGVJbnN0YW5jZSwgZiksXG4gICAgc2VxdWVuY2U6IGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywgMiwgMCksXG4gICAgaWQ6IChmID0gbXNnLmdldElkKCkpICYmIHN5c3RlbV9ndWlkX3BiLmd1aWQudG9PYmplY3QoaW5jbHVkZUluc3RhbmNlLCBmKSxcbiAgICB0aW1lc3RhbXA6IGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KG1zZywgNCwgMCksXG4gICAgY29ycmVsYXRpb25pZDogKGYgPSBtc2cuZ2V0Q29ycmVsYXRpb25pZCgpKSAmJiBzeXN0ZW1fZ3VpZF9wYi5ndWlkLnRvT2JqZWN0KGluY2x1ZGVJbnN0YW5jZSwgZiksXG4gICAgZXZlbnRzTGlzdDoganNwYi5NZXNzYWdlLnRvT2JqZWN0TGlzdChtc2cuZ2V0RXZlbnRzTGlzdCgpLFxuICAgIEV2ZW50c19SZWxhdGl2aXR5X2ludGVyYWN0aW9uX2V2ZW50X2VudmVsb3BlX3BiLkV2ZW50RW52ZWxvcGUudG9PYmplY3QsIGluY2x1ZGVJbnN0YW5jZSlcbiAgfTtcblxuICBpZiAoaW5jbHVkZUluc3RhbmNlKSB7XG4gICAgb2JqLiRqc3BiTWVzc2FnZUluc3RhbmNlID0gbXNnO1xuICB9XG4gIHJldHVybiBvYmo7XG59O1xufVxuXG5cbi8qKlxuICogRGVzZXJpYWxpemVzIGJpbmFyeSBkYXRhIChpbiBwcm90b2J1ZiB3aXJlIGZvcm1hdCkuXG4gKiBAcGFyYW0ge2pzcGIuQnl0ZVNvdXJjZX0gYnl0ZXMgVGhlIGJ5dGVzIHRvIGRlc2VyaWFsaXplLlxuICogQHJldHVybiB7IXByb3RvLmRvbGl0dGxlLmV2ZW50cy5yZWxhdGl2aXR5LkNvbW1pdHRlZEV2ZW50U3RyZWFtfVxuICovXG5wcm90by5kb2xpdHRsZS5ldmVudHMucmVsYXRpdml0eS5Db21taXR0ZWRFdmVudFN0cmVhbS5kZXNlcmlhbGl6ZUJpbmFyeSA9IGZ1bmN0aW9uKGJ5dGVzKSB7XG4gIHZhciByZWFkZXIgPSBuZXcganNwYi5CaW5hcnlSZWFkZXIoYnl0ZXMpO1xuICB2YXIgbXNnID0gbmV3IHByb3RvLmRvbGl0dGxlLmV2ZW50cy5yZWxhdGl2aXR5LkNvbW1pdHRlZEV2ZW50U3RyZWFtO1xuICByZXR1cm4gcHJvdG8uZG9saXR0bGUuZXZlbnRzLnJlbGF0aXZpdHkuQ29tbWl0dGVkRXZlbnRTdHJlYW0uZGVzZXJpYWxpemVCaW5hcnlGcm9tUmVhZGVyKG1zZywgcmVhZGVyKTtcbn07XG5cblxuLyoqXG4gKiBEZXNlcmlhbGl6ZXMgYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmUgZm9ybWF0KSBmcm9tIHRoZVxuICogZ2l2ZW4gcmVhZGVyIGludG8gdGhlIGdpdmVuIG1lc3NhZ2Ugb2JqZWN0LlxuICogQHBhcmFtIHshcHJvdG8uZG9saXR0bGUuZXZlbnRzLnJlbGF0aXZpdHkuQ29tbWl0dGVkRXZlbnRTdHJlYW19IG1zZyBUaGUgbWVzc2FnZSBvYmplY3QgdG8gZGVzZXJpYWxpemUgaW50by5cbiAqIEBwYXJhbSB7IWpzcGIuQmluYXJ5UmVhZGVyfSByZWFkZXIgVGhlIEJpbmFyeVJlYWRlciB0byB1c2UuXG4gKiBAcmV0dXJuIHshcHJvdG8uZG9saXR0bGUuZXZlbnRzLnJlbGF0aXZpdHkuQ29tbWl0dGVkRXZlbnRTdHJlYW19XG4gKi9cbnByb3RvLmRvbGl0dGxlLmV2ZW50cy5yZWxhdGl2aXR5LkNvbW1pdHRlZEV2ZW50U3RyZWFtLmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlciA9IGZ1bmN0aW9uKG1zZywgcmVhZGVyKSB7XG4gIHdoaWxlIChyZWFkZXIubmV4dEZpZWxkKCkpIHtcbiAgICBpZiAocmVhZGVyLmlzRW5kR3JvdXAoKSkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHZhciBmaWVsZCA9IHJlYWRlci5nZXRGaWVsZE51bWJlcigpO1xuICAgIHN3aXRjaCAoZmllbGQpIHtcbiAgICBjYXNlIDE6XG4gICAgICB2YXIgdmFsdWUgPSBuZXcgRXZlbnRzX1JlbGF0aXZpdHlfaW50ZXJhY3Rpb25fdmVyc2lvbmVkX2V2ZW50X3NvdXJjZV9wYi5WZXJzaW9uZWRFdmVudFNvdXJjZTtcbiAgICAgIHJlYWRlci5yZWFkTWVzc2FnZSh2YWx1ZSxFdmVudHNfUmVsYXRpdml0eV9pbnRlcmFjdGlvbl92ZXJzaW9uZWRfZXZlbnRfc291cmNlX3BiLlZlcnNpb25lZEV2ZW50U291cmNlLmRlc2VyaWFsaXplQmluYXJ5RnJvbVJlYWRlcik7XG4gICAgICBtc2cuc2V0U291cmNlKHZhbHVlKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMjpcbiAgICAgIHZhciB2YWx1ZSA9IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAocmVhZGVyLnJlYWRVaW50NjQoKSk7XG4gICAgICBtc2cuc2V0U2VxdWVuY2UodmFsdWUpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAzOlxuICAgICAgdmFyIHZhbHVlID0gbmV3IHN5c3RlbV9ndWlkX3BiLmd1aWQ7XG4gICAgICByZWFkZXIucmVhZE1lc3NhZ2UodmFsdWUsc3lzdGVtX2d1aWRfcGIuZ3VpZC5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXIpO1xuICAgICAgbXNnLnNldElkKHZhbHVlKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgNDpcbiAgICAgIHZhciB2YWx1ZSA9IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAocmVhZGVyLnJlYWRJbnQ2NCgpKTtcbiAgICAgIG1zZy5zZXRUaW1lc3RhbXAodmFsdWUpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSA1OlxuICAgICAgdmFyIHZhbHVlID0gbmV3IHN5c3RlbV9ndWlkX3BiLmd1aWQ7XG4gICAgICByZWFkZXIucmVhZE1lc3NhZ2UodmFsdWUsc3lzdGVtX2d1aWRfcGIuZ3VpZC5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXIpO1xuICAgICAgbXNnLnNldENvcnJlbGF0aW9uaWQodmFsdWUpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSA2OlxuICAgICAgdmFyIHZhbHVlID0gbmV3IEV2ZW50c19SZWxhdGl2aXR5X2ludGVyYWN0aW9uX2V2ZW50X2VudmVsb3BlX3BiLkV2ZW50RW52ZWxvcGU7XG4gICAgICByZWFkZXIucmVhZE1lc3NhZ2UodmFsdWUsRXZlbnRzX1JlbGF0aXZpdHlfaW50ZXJhY3Rpb25fZXZlbnRfZW52ZWxvcGVfcGIuRXZlbnRFbnZlbG9wZS5kZXNlcmlhbGl6ZUJpbmFyeUZyb21SZWFkZXIpO1xuICAgICAgbXNnLmFkZEV2ZW50cyh2YWx1ZSk7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgcmVhZGVyLnNraXBGaWVsZCgpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIHJldHVybiBtc2c7XG59O1xuXG5cbi8qKlxuICogU2VyaWFsaXplcyB0aGUgbWVzc2FnZSB0byBiaW5hcnkgZGF0YSAoaW4gcHJvdG9idWYgd2lyZSBmb3JtYXQpLlxuICogQHJldHVybiB7IVVpbnQ4QXJyYXl9XG4gKi9cbnByb3RvLmRvbGl0dGxlLmV2ZW50cy5yZWxhdGl2aXR5LkNvbW1pdHRlZEV2ZW50U3RyZWFtLnByb3RvdHlwZS5zZXJpYWxpemVCaW5hcnkgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHdyaXRlciA9IG5ldyBqc3BiLkJpbmFyeVdyaXRlcigpO1xuICBwcm90by5kb2xpdHRsZS5ldmVudHMucmVsYXRpdml0eS5Db21taXR0ZWRFdmVudFN0cmVhbS5zZXJpYWxpemVCaW5hcnlUb1dyaXRlcih0aGlzLCB3cml0ZXIpO1xuICByZXR1cm4gd3JpdGVyLmdldFJlc3VsdEJ1ZmZlcigpO1xufTtcblxuXG4vKipcbiAqIFNlcmlhbGl6ZXMgdGhlIGdpdmVuIG1lc3NhZ2UgdG8gYmluYXJ5IGRhdGEgKGluIHByb3RvYnVmIHdpcmVcbiAqIGZvcm1hdCksIHdyaXRpbmcgdG8gdGhlIGdpdmVuIEJpbmFyeVdyaXRlci5cbiAqIEBwYXJhbSB7IXByb3RvLmRvbGl0dGxlLmV2ZW50cy5yZWxhdGl2aXR5LkNvbW1pdHRlZEV2ZW50U3RyZWFtfSBtZXNzYWdlXG4gKiBAcGFyYW0geyFqc3BiLkJpbmFyeVdyaXRlcn0gd3JpdGVyXG4gKiBAc3VwcHJlc3Mge3VudXNlZExvY2FsVmFyaWFibGVzfSBmIGlzIG9ubHkgdXNlZCBmb3IgbmVzdGVkIG1lc3NhZ2VzXG4gKi9cbnByb3RvLmRvbGl0dGxlLmV2ZW50cy5yZWxhdGl2aXR5LkNvbW1pdHRlZEV2ZW50U3RyZWFtLnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyID0gZnVuY3Rpb24obWVzc2FnZSwgd3JpdGVyKSB7XG4gIHZhciBmID0gdW5kZWZpbmVkO1xuICBmID0gbWVzc2FnZS5nZXRTb3VyY2UoKTtcbiAgaWYgKGYgIT0gbnVsbCkge1xuICAgIHdyaXRlci53cml0ZU1lc3NhZ2UoXG4gICAgICAxLFxuICAgICAgZixcbiAgICAgIEV2ZW50c19SZWxhdGl2aXR5X2ludGVyYWN0aW9uX3ZlcnNpb25lZF9ldmVudF9zb3VyY2VfcGIuVmVyc2lvbmVkRXZlbnRTb3VyY2Uuc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXJcbiAgICApO1xuICB9XG4gIGYgPSBtZXNzYWdlLmdldFNlcXVlbmNlKCk7XG4gIGlmIChmICE9PSAwKSB7XG4gICAgd3JpdGVyLndyaXRlVWludDY0KFxuICAgICAgMixcbiAgICAgIGZcbiAgICApO1xuICB9XG4gIGYgPSBtZXNzYWdlLmdldElkKCk7XG4gIGlmIChmICE9IG51bGwpIHtcbiAgICB3cml0ZXIud3JpdGVNZXNzYWdlKFxuICAgICAgMyxcbiAgICAgIGYsXG4gICAgICBzeXN0ZW1fZ3VpZF9wYi5ndWlkLnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyXG4gICAgKTtcbiAgfVxuICBmID0gbWVzc2FnZS5nZXRUaW1lc3RhbXAoKTtcbiAgaWYgKGYgIT09IDApIHtcbiAgICB3cml0ZXIud3JpdGVJbnQ2NChcbiAgICAgIDQsXG4gICAgICBmXG4gICAgKTtcbiAgfVxuICBmID0gbWVzc2FnZS5nZXRDb3JyZWxhdGlvbmlkKCk7XG4gIGlmIChmICE9IG51bGwpIHtcbiAgICB3cml0ZXIud3JpdGVNZXNzYWdlKFxuICAgICAgNSxcbiAgICAgIGYsXG4gICAgICBzeXN0ZW1fZ3VpZF9wYi5ndWlkLnNlcmlhbGl6ZUJpbmFyeVRvV3JpdGVyXG4gICAgKTtcbiAgfVxuICBmID0gbWVzc2FnZS5nZXRFdmVudHNMaXN0KCk7XG4gIGlmIChmLmxlbmd0aCA+IDApIHtcbiAgICB3cml0ZXIud3JpdGVSZXBlYXRlZE1lc3NhZ2UoXG4gICAgICA2LFxuICAgICAgZixcbiAgICAgIEV2ZW50c19SZWxhdGl2aXR5X2ludGVyYWN0aW9uX2V2ZW50X2VudmVsb3BlX3BiLkV2ZW50RW52ZWxvcGUuc2VyaWFsaXplQmluYXJ5VG9Xcml0ZXJcbiAgICApO1xuICB9XG59O1xuXG5cbi8qKlxuICogb3B0aW9uYWwgVmVyc2lvbmVkRXZlbnRTb3VyY2Ugc291cmNlID0gMTtcbiAqIEByZXR1cm4gez9wcm90by5kb2xpdHRsZS5ldmVudHMucmVsYXRpdml0eS5WZXJzaW9uZWRFdmVudFNvdXJjZX1cbiAqL1xucHJvdG8uZG9saXR0bGUuZXZlbnRzLnJlbGF0aXZpdHkuQ29tbWl0dGVkRXZlbnRTdHJlYW0ucHJvdG90eXBlLmdldFNvdXJjZSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gLyoqIEB0eXBlez9wcm90by5kb2xpdHRsZS5ldmVudHMucmVsYXRpdml0eS5WZXJzaW9uZWRFdmVudFNvdXJjZX0gKi8gKFxuICAgIGpzcGIuTWVzc2FnZS5nZXRXcmFwcGVyRmllbGQodGhpcywgRXZlbnRzX1JlbGF0aXZpdHlfaW50ZXJhY3Rpb25fdmVyc2lvbmVkX2V2ZW50X3NvdXJjZV9wYi5WZXJzaW9uZWRFdmVudFNvdXJjZSwgMSkpO1xufTtcblxuXG4vKiogQHBhcmFtIHs/cHJvdG8uZG9saXR0bGUuZXZlbnRzLnJlbGF0aXZpdHkuVmVyc2lvbmVkRXZlbnRTb3VyY2V8dW5kZWZpbmVkfSB2YWx1ZSAqL1xucHJvdG8uZG9saXR0bGUuZXZlbnRzLnJlbGF0aXZpdHkuQ29tbWl0dGVkRXZlbnRTdHJlYW0ucHJvdG90eXBlLnNldFNvdXJjZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIGpzcGIuTWVzc2FnZS5zZXRXcmFwcGVyRmllbGQodGhpcywgMSwgdmFsdWUpO1xufTtcblxuXG4vKipcbiAqIENsZWFycyB0aGUgbWVzc2FnZSBmaWVsZCBtYWtpbmcgaXQgdW5kZWZpbmVkLlxuICovXG5wcm90by5kb2xpdHRsZS5ldmVudHMucmVsYXRpdml0eS5Db21taXR0ZWRFdmVudFN0cmVhbS5wcm90b3R5cGUuY2xlYXJTb3VyY2UgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5zZXRTb3VyY2UodW5kZWZpbmVkKTtcbn07XG5cblxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgdGhpcyBmaWVsZCBpcyBzZXQuXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5wcm90by5kb2xpdHRsZS5ldmVudHMucmVsYXRpdml0eS5Db21taXR0ZWRFdmVudFN0cmVhbS5wcm90b3R5cGUuaGFzU291cmNlID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGQodGhpcywgMSkgIT0gbnVsbDtcbn07XG5cblxuLyoqXG4gKiBvcHRpb25hbCB1aW50NjQgc2VxdWVuY2UgPSAyO1xuICogQHJldHVybiB7bnVtYmVyfVxuICovXG5wcm90by5kb2xpdHRsZS5ldmVudHMucmVsYXRpdml0eS5Db21taXR0ZWRFdmVudFN0cmVhbS5wcm90b3R5cGUuZ2V0U2VxdWVuY2UgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoanNwYi5NZXNzYWdlLmdldEZpZWxkV2l0aERlZmF1bHQodGhpcywgMiwgMCkpO1xufTtcblxuXG4vKiogQHBhcmFtIHtudW1iZXJ9IHZhbHVlICovXG5wcm90by5kb2xpdHRsZS5ldmVudHMucmVsYXRpdml0eS5Db21taXR0ZWRFdmVudFN0cmVhbS5wcm90b3R5cGUuc2V0U2VxdWVuY2UgPSBmdW5jdGlvbih2YWx1ZSkge1xuICBqc3BiLk1lc3NhZ2Uuc2V0UHJvdG8zSW50RmllbGQodGhpcywgMiwgdmFsdWUpO1xufTtcblxuXG4vKipcbiAqIG9wdGlvbmFsIGRvbGl0dGxlLmd1aWQgaWQgPSAzO1xuICogQHJldHVybiB7P3Byb3RvLmRvbGl0dGxlLmd1aWR9XG4gKi9cbnByb3RvLmRvbGl0dGxlLmV2ZW50cy5yZWxhdGl2aXR5LkNvbW1pdHRlZEV2ZW50U3RyZWFtLnByb3RvdHlwZS5nZXRJZCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gLyoqIEB0eXBlez9wcm90by5kb2xpdHRsZS5ndWlkfSAqLyAoXG4gICAganNwYi5NZXNzYWdlLmdldFdyYXBwZXJGaWVsZCh0aGlzLCBzeXN0ZW1fZ3VpZF9wYi5ndWlkLCAzKSk7XG59O1xuXG5cbi8qKiBAcGFyYW0gez9wcm90by5kb2xpdHRsZS5ndWlkfHVuZGVmaW5lZH0gdmFsdWUgKi9cbnByb3RvLmRvbGl0dGxlLmV2ZW50cy5yZWxhdGl2aXR5LkNvbW1pdHRlZEV2ZW50U3RyZWFtLnByb3RvdHlwZS5zZXRJZCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIGpzcGIuTWVzc2FnZS5zZXRXcmFwcGVyRmllbGQodGhpcywgMywgdmFsdWUpO1xufTtcblxuXG4vKipcbiAqIENsZWFycyB0aGUgbWVzc2FnZSBmaWVsZCBtYWtpbmcgaXQgdW5kZWZpbmVkLlxuICovXG5wcm90by5kb2xpdHRsZS5ldmVudHMucmVsYXRpdml0eS5Db21taXR0ZWRFdmVudFN0cmVhbS5wcm90b3R5cGUuY2xlYXJJZCA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLnNldElkKHVuZGVmaW5lZCk7XG59O1xuXG5cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIHRoaXMgZmllbGQgaXMgc2V0LlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xucHJvdG8uZG9saXR0bGUuZXZlbnRzLnJlbGF0aXZpdHkuQ29tbWl0dGVkRXZlbnRTdHJlYW0ucHJvdG90eXBlLmhhc0lkID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBqc3BiLk1lc3NhZ2UuZ2V0RmllbGQodGhpcywgMykgIT0gbnVsbDtcbn07XG5cblxuLyoqXG4gKiBvcHRpb25hbCBpbnQ2NCB0aW1lU3RhbXAgPSA0O1xuICogQHJldHVybiB7bnVtYmVyfVxuICovXG5wcm90by5kb2xpdHRsZS5ldmVudHMucmVsYXRpdml0eS5Db21taXR0ZWRFdmVudFN0cmVhbS5wcm90b3R5cGUuZ2V0VGltZXN0YW1wID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKGpzcGIuTWVzc2FnZS5nZXRGaWVsZFdpdGhEZWZhdWx0KHRoaXMsIDQsIDApKTtcbn07XG5cblxuLyoqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSAqL1xucHJvdG8uZG9saXR0bGUuZXZlbnRzLnJlbGF0aXZpdHkuQ29tbWl0dGVkRXZlbnRTdHJlYW0ucHJvdG90eXBlLnNldFRpbWVzdGFtcCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIGpzcGIuTWVzc2FnZS5zZXRQcm90bzNJbnRGaWVsZCh0aGlzLCA0LCB2YWx1ZSk7XG59O1xuXG5cbi8qKlxuICogb3B0aW9uYWwgZG9saXR0bGUuZ3VpZCBjb3JyZWxhdGlvbklkID0gNTtcbiAqIEByZXR1cm4gez9wcm90by5kb2xpdHRsZS5ndWlkfVxuICovXG5wcm90by5kb2xpdHRsZS5ldmVudHMucmVsYXRpdml0eS5Db21taXR0ZWRFdmVudFN0cmVhbS5wcm90b3R5cGUuZ2V0Q29ycmVsYXRpb25pZCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gLyoqIEB0eXBlez9wcm90by5kb2xpdHRsZS5ndWlkfSAqLyAoXG4gICAganNwYi5NZXNzYWdlLmdldFdyYXBwZXJGaWVsZCh0aGlzLCBzeXN0ZW1fZ3VpZF9wYi5ndWlkLCA1KSk7XG59O1xuXG5cbi8qKiBAcGFyYW0gez9wcm90by5kb2xpdHRsZS5ndWlkfHVuZGVmaW5lZH0gdmFsdWUgKi9cbnByb3RvLmRvbGl0dGxlLmV2ZW50cy5yZWxhdGl2aXR5LkNvbW1pdHRlZEV2ZW50U3RyZWFtLnByb3RvdHlwZS5zZXRDb3JyZWxhdGlvbmlkID0gZnVuY3Rpb24odmFsdWUpIHtcbiAganNwYi5NZXNzYWdlLnNldFdyYXBwZXJGaWVsZCh0aGlzLCA1LCB2YWx1ZSk7XG59O1xuXG5cbi8qKlxuICogQ2xlYXJzIHRoZSBtZXNzYWdlIGZpZWxkIG1ha2luZyBpdCB1bmRlZmluZWQuXG4gKi9cbnByb3RvLmRvbGl0dGxlLmV2ZW50cy5yZWxhdGl2aXR5LkNvbW1pdHRlZEV2ZW50U3RyZWFtLnByb3RvdHlwZS5jbGVhckNvcnJlbGF0aW9uaWQgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5zZXRDb3JyZWxhdGlvbmlkKHVuZGVmaW5lZCk7XG59O1xuXG5cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIHRoaXMgZmllbGQgaXMgc2V0LlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xucHJvdG8uZG9saXR0bGUuZXZlbnRzLnJlbGF0aXZpdHkuQ29tbWl0dGVkRXZlbnRTdHJlYW0ucHJvdG90eXBlLmhhc0NvcnJlbGF0aW9uaWQgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5nZXRGaWVsZCh0aGlzLCA1KSAhPSBudWxsO1xufTtcblxuXG4vKipcbiAqIHJlcGVhdGVkIEV2ZW50RW52ZWxvcGUgZXZlbnRzID0gNjtcbiAqIEByZXR1cm4geyFBcnJheTwhcHJvdG8uZG9saXR0bGUuZXZlbnRzLnJlbGF0aXZpdHkuRXZlbnRFbnZlbG9wZT59XG4gKi9cbnByb3RvLmRvbGl0dGxlLmV2ZW50cy5yZWxhdGl2aXR5LkNvbW1pdHRlZEV2ZW50U3RyZWFtLnByb3RvdHlwZS5nZXRFdmVudHNMaXN0ID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiAvKiogQHR5cGV7IUFycmF5PCFwcm90by5kb2xpdHRsZS5ldmVudHMucmVsYXRpdml0eS5FdmVudEVudmVsb3BlPn0gKi8gKFxuICAgIGpzcGIuTWVzc2FnZS5nZXRSZXBlYXRlZFdyYXBwZXJGaWVsZCh0aGlzLCBFdmVudHNfUmVsYXRpdml0eV9pbnRlcmFjdGlvbl9ldmVudF9lbnZlbG9wZV9wYi5FdmVudEVudmVsb3BlLCA2KSk7XG59O1xuXG5cbi8qKiBAcGFyYW0geyFBcnJheTwhcHJvdG8uZG9saXR0bGUuZXZlbnRzLnJlbGF0aXZpdHkuRXZlbnRFbnZlbG9wZT59IHZhbHVlICovXG5wcm90by5kb2xpdHRsZS5ldmVudHMucmVsYXRpdml0eS5Db21taXR0ZWRFdmVudFN0cmVhbS5wcm90b3R5cGUuc2V0RXZlbnRzTGlzdCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIGpzcGIuTWVzc2FnZS5zZXRSZXBlYXRlZFdyYXBwZXJGaWVsZCh0aGlzLCA2LCB2YWx1ZSk7XG59O1xuXG5cbi8qKlxuICogQHBhcmFtIHshcHJvdG8uZG9saXR0bGUuZXZlbnRzLnJlbGF0aXZpdHkuRXZlbnRFbnZlbG9wZT19IG9wdF92YWx1ZVxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfaW5kZXhcbiAqIEByZXR1cm4geyFwcm90by5kb2xpdHRsZS5ldmVudHMucmVsYXRpdml0eS5FdmVudEVudmVsb3BlfVxuICovXG5wcm90by5kb2xpdHRsZS5ldmVudHMucmVsYXRpdml0eS5Db21taXR0ZWRFdmVudFN0cmVhbS5wcm90b3R5cGUuYWRkRXZlbnRzID0gZnVuY3Rpb24ob3B0X3ZhbHVlLCBvcHRfaW5kZXgpIHtcbiAgcmV0dXJuIGpzcGIuTWVzc2FnZS5hZGRUb1JlcGVhdGVkV3JhcHBlckZpZWxkKHRoaXMsIDYsIG9wdF92YWx1ZSwgcHJvdG8uZG9saXR0bGUuZXZlbnRzLnJlbGF0aXZpdHkuRXZlbnRFbnZlbG9wZSwgb3B0X2luZGV4KTtcbn07XG5cblxuLyoqXG4gKiBDbGVhcnMgdGhlIGxpc3QgbWFraW5nIGl0IGVtcHR5IGJ1dCBub24tbnVsbC5cbiAqL1xucHJvdG8uZG9saXR0bGUuZXZlbnRzLnJlbGF0aXZpdHkuQ29tbWl0dGVkRXZlbnRTdHJlYW0ucHJvdG90eXBlLmNsZWFyRXZlbnRzTGlzdCA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLnNldEV2ZW50c0xpc3QoW10pO1xufTtcblxuXG5nb29nLm9iamVjdC5leHRlbmQoZXhwb3J0cywgcHJvdG8uZG9saXR0bGUuZXZlbnRzLnJlbGF0aXZpdHkpO1xuIl19